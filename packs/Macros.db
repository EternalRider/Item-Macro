{"_id":"Csw8VrQnnVStnqU5","name":"Basic Attack Macro (5e)","type":"script","author":"rY3aSQCPtPJz0xsx","img":"icons/svg/dice-target.svg","scope":"global","command":"(async () =>{\n    let target = Array.from(game.user.targets)[0];\n    if(!target && target.data.disposition < 0) return ui.notificiations.error(`Target an Enemy`);\n    if(item.hasSave){\n        let { save } = item.data.data;\n        let { total } = await target.actor.rollAbilitySave(save.ability, { \n            fastForward : true, \n            rollMode : CONST.DICE_ROLL_MODES.BLIND,\n            flavor : `${CONFIG.DND5E.abilities[save.ability]} save vs ${item.name}`\n        });\n        if(total < save.dc && item.hasDamage){\n            let {damage} = item.data.data;\n            await item.rollDamage({\n                options : {\n                    flavor : `${item.name} - Damage Roll (${damage.parts.reduce((a,v)=> a+=`${CONFIG.DND5E.damageTypes[v[1]]}/`, ``).slice(0,-1)}) vs ${target.name}`,\n                },\n            });\n        }\n    }\n    if(item.hasAttack){\n        let { ac } = target.actor.data.data.attributes;\n        let { total } = await item.rollAttack({ \n            flavor : `${item.name} - Attack Roll vs ${target.name}`,\n        });\n        if(total >= ac.value && item.hasDamage){\n            let {damage} = item.data.data;\n            await item.rollDamage({\n                options : {\n                    flavor : `${item.name} - Damage Roll (${damage.parts.reduce((a,v)=> a+=`${CONFIG.DND5E.damageTypes[v[1]]}/`, ``).slice(0,-1)}) vs ${target.name}`\n                },\n            });\n        }\n    }\n})();","folder":null,"sort":0,"permission":{"default":0,"rY3aSQCPtPJz0xsx":3},"flags":{"core":{"sourceId":"Macro.0mFakLwKeGwASJS0"}}}
